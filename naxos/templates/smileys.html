<div class="col-xs-5 panel panel-default" id="smileys-panel" style="margin:0">
    <div class="panel-body">
        <div class="text-center" style="letter-spacing:5px;line-height:200%">
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/salut.gif" alt=":salut:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/kikoo.gif" alt=":kikoo:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/special-smile.gif" alt=":)"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/smile.gif" alt=":smile:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/special-wink.gif" alt=";)"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/sun.gif" alt=":sun:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/green.gif" alt=":green:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/weee.gif" alt=":weee:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/ane.gif" alt=":ane:"></span>
            <br class="hidden-xs hidden-sm" />
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/maboul.gif" alt=":maboul:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/vv.gif" alt=":vv:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/green2.gif" alt=":green2:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/dent2.gif" alt=":dent2:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/banane.gif" alt=":banane:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/blonde.gif" alt=":blonde:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/lapin.gif" alt=":lapin:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/geek.gif" alt=":geek:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/nerd.gif" alt=":nerd:"></span>
            <br class="hidden-xs hidden-sm" />
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/bicluc.gif" alt=":bicluc:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/lolpa.gif" alt=":lolpa:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/kneu.gif" alt=":kneu:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/kc.gif" alt=":kc:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/troll.gif" alt=":troll:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/bond.gif" alt=":bond:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/winner.gif" alt=":winner:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/ko.gif" alt=":ko:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/pt.gif" alt=":pt:"></span>
            <br class="hidden-xs hidden-sm" />
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/heu.gif" alt=":heu:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/hihi.gif" alt=":hihi:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/beu.gif" alt=":beu:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/lolkc.gif" alt=":lolkc:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/lol.gif" alt=":lol:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/mdr.gif" alt=":mdr:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/ptdr.gif" alt=":ptdr:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/lala.gif" alt=":lala:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/siffle.gif" alt=":siffle:"></span>
            <br class="hidden-xs hidden-sm" />
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/gum.gif" alt=":gum:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/hard.gif" alt=":hard:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/cache.gif" alt=":cache:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/ange.gif" alt=":ange:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/prie.gif" alt=":prie:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/kimouss.gif" alt=":kimouss:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/miam.gif" alt=":miam:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/zzz.gif" alt=":zzz:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/+.gif" alt=":+:"></span>
            <br class="hidden-xs hidden-sm" />
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/yep.gif" alt=":yep:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/oui.gif" alt=":oui:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/bravo.gif" alt=":bravo:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/respect.gif" alt=":respect:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/love1.gif" alt=":love1:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/love2.gif" alt=":love2:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/bise.gif" alt=":bise:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/smack.gif" alt=":smack:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/niktou.gif" alt=":niktou:"></span>
            <br class="hidden-xs hidden-sm" />
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/oh.gif" alt=":oh:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/han.gif" alt=":han:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/mmm.gif" alt=":mmm:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/hein.gif" alt=":hein:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/special-3question.gif" alt=":???:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/tanpi.gif" alt=":tanpi:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/bof.gif" alt=":bof:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/peur.gif" alt=":peur:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/vomi.gif" alt=":vomi:"></span>
            <br class="hidden-xs hidden-sm" />
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/mal.gif" alt=":mal:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/arf.gif" alt=":arf:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/pfff.gif" alt=":pfff:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/alala.gif" alt=":alala:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/pendu.gif" alt=":pendu:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/-.gif" alt=":-:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/non.gif" alt=":non:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/colere.gif" alt=":colere:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/grrr.gif" alt=":grrr:"></span>
            <br class="hidden-xs hidden-sm" />
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/-o.gif" alt=":-o:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/special-sad.gif" alt=":("></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/pleure.gif" alt=":pleure:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/larme.gif" alt=":larme:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/lang1.gif" alt=":lang1:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/lang2.gif" alt=":lang2:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/fuck1.gif" alt=":fuck1:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/fuck2.gif" alt=":fuck2:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/diable2.gif" alt=":diable2:"></span>
            <span class="fake-link"><img class="smiley" src="/static/img/smileys/v.gif" alt=":v"></span>
        </div>
        <div class="text-center">
            <button tabindex="-1" tabindex="" ype="button" class="btn btn-default btn-sm" id="show-all-smileys" style="margin-top:20px">
                <span>Voir tous les smileys</span>
            </button>
        </div>
    </div>
</div>
<div class="col-xs-12 panel panel-default" id="all-smileys-panel" style="margin-top:20px">
    <div class="panel-body">
        <div class="text-center" style="letter-spacing:5px;line-height:200%">
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/popcorn.gif" alt=":popcorn:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/triste.gif" alt=":triste:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/dieudo.gif" alt=":dieudo:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/delarue.gif" alt=":delarue:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/miyamoto.gif" alt=":miyamoto:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/johnny.gif" alt=":johnny:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/pedobear.gif" alt=":pedobear:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/music.gif" alt=":music:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/marilyn.gif" alt=":marilyn:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/johnny.gif" alt=":johnny:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/tibia.gif" alt=":tibia:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/zen.gif" alt=":zen:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/facepalm.gif" alt=":facepalm:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/pfiou.gif" alt=":pfiou:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/snob.gif" alt=":snob:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/amour.gif" alt=":amour:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/bave.gif" alt=":bave:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/biere.gif" alt=":biere:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/billycrawford.gif" alt=":billycrawford:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/bing.gif" alt=":bing:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/bobi.gif" alt=":bobi:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/boogy.gif" alt=":boogy:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/boulet.gif" alt=":boulet:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/bras.gif" alt=":bras:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/castor.gif" alt=":castor:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/cend.gif" alt=":cend:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/ch.gif" alt=":ch:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/cocfumir.gif" alt=":cocfumir:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/couic.gif" alt=":couic:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/cri.gif" alt=":cri:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/cucu.gif" alt=":cucu:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/dafuck.gif" alt=":dafuck:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/dent1.gif" alt=":dent1:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/D.gif" alt=":D:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/dodane.gif" alt=":dodane:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/dredd.gif" alt=":dredd:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/fouet.gif" alt=":fouet:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/fuck3.gif" alt=":fuck3:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/!.gif" alt=":!:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/gneee.gif" alt=":gneee:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/gne.gif" alt=":gne:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/haha.gif" alt=":haha:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/jesors.gif" alt=":jesors:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/kami.gif" alt=":kami:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/kermit.gif" alt=":kermit:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/latin.gif" alt=":latin:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/merlot.gif" alt=":merlot:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/meuh.gif" alt=":meuh:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/moto.gif" alt=":moto:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/neuneu.gif" alt=":neuneu:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/nicole.gif" alt=":nicole:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/nono.gif" alt=":nono:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/obe.gif" alt=":obe:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/orvis.gif" alt=":orvis:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/pabo.gif" alt=":pabo:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/parici.gif" alt=":parici:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/paysan.gif" alt=":paysan:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/peace.gif" alt=":peace:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/pif.gif" alt=":pif:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/poulet.gif" alt=":poulet:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/rage.gif" alt=":rage:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/rap.gif" alt=":rap:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/shell.gif" alt=":shell:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/shelly.gif" alt=":shelly:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/special-meh.gif" alt=":special-meh:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/special-question.gif" alt=":special-question:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/supair.gif" alt=":supair:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/taist.gif" alt=":taist:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/teq.gif" alt=":teq:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/tetie.gif" alt=":tetie:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/up.gif" alt=":up:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/waf.gif" alt=":waf:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/yoda.gif" alt=":yoda:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/youpifuck.gif" alt=":youpifuck:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/youpi.gif" alt=":youpi:"></span>
            <span class="fake-link"><img class="smiley"src="/static/img/smileys/zizou.gif" alt=":zizou:"></span>
        </div>
    </div>
</div>
<script>
    // Default state (hidden or not)
    {% if user.showSmileys %}
        $('#show-smileys').addClass("active");
        $('#main').removeClass("col-xs-12").addClass("col-xs-7");
    {% else %}
        $('#smileys-panel').hide();
    {% endif %}
    $('#all-smileys-panel').hide();
    // Show-Hide the smiley panels
    $('#show-smileys').click(function() {
        if($(this).hasClass("active")) {
            $(this).removeClass("active");
            $('#main').removeClass("col-xs-7").addClass("col-xs-12");
        } else {
            $(this).addClass("active");    
            $('#main').removeClass("col-xs-12").addClass("col-xs-7");
        }
        $('#smileys-panel').toggle();
        $('#show-all-smileys').removeClass("active");
        $('#all-smileys-panel').hide();
        $("textarea[id$='content_plain']").focus();
    });
    $('#show-all-smileys').click(function() {
        if($(this).hasClass("active")) {
            $(this).removeClass("active");
        } else {
            $(this).addClass("active");    
        }
        $('#all-smileys-panel').toggle();
        $("textarea[id$='content_plain']").focus();
    });
    // Add smileys to message
    function insertSmiley($textArea, smiley) {
        var len = $textArea.val().length;
        var start = $textArea[0].selectionStart;
        var end = $textArea[0].selectionEnd;
        $textArea.val($textArea.val().substring(0, start) + " " + smiley + $textArea.val().substring(end, len));
        return start + smiley.length + 1;
    };
    $('span.fake-link > img.smiley').click(function() {
        var $text = $("textarea[id$='content_plain']");
        var caret = insertSmiley($text, $(this).attr("alt"));
        scrollToPosition($text, caret);
    });
</script>