{% extends "base.html" %}
{% load static %}
{% block content %}
{# Path #}
<ol class="breadcrumb">
    <li class="active">Accueil</li>
</ol><br>
{# Threads #}
<div class="row">
    <table class="table table-condensed table-bordered" id="view">
        <thead>
        <tr>
            <th class="text-center" style="padding:5px 0;width:25px"><img src="{% static 'img/detail_search.gif' %}" style="vertical-align:bottom;padding-bottom:3px"></th>
            <th>Catégories</th>
            <th class="text-center col-xs-1 hidden-xs">Messages</th>
            <th class="text-center col-xs-1 hidden-xs">Réponses</th>
            <th class="text-center col-xs-2">Dernier<span class="hidden-xs"> message</span></th>
        </tr>
        </thead>
        <tbody>
            {% for category in object_list %}
            {% with category.threads.latest as latest_thread %}
            <tr>
                <td class="vert-align">
                    {% if latest_thread.latest_post in readCaret %}
                        <img src="{% static 'img/off.png' %}" style="vertical-align:middle;padding:0 0 3px 0;">
                    {% else %}
                        <img src="{% static 'img/on.png' %}" style="vertical-align:middle;padding:0 0 3px 0;">
                    {% endif %}
                </td>
                <td class="vert-align" style="height:45px">
                    <strong><a href="{% url 'forum:category' category.slug %}">{{ category.title }}</a></strong><br>
                    <small class="hidden-xs">{{ category.subtitle }}</small>
                </td>
                <td class="text-center vert-align hidden-xs"><small>{{ category.threads.count }}</small></td>
                <td class="text-center vert-align hidden-xs"><small>{{ category.postCount }}</small></td>
                <td class="text-center vert-align">
                    {% if latest_thread %}
                        <small>
                        <a href="{% url 'forum:thread' category.slug latest_thread.slug %}?page=last#{{ latest_thread.latest_post.pk }}" class="lastMessage">
                        <span class="hidden-xs">{{ latest_thread.modified|date:'d/m/y H:i' }}<br></span>
                        <span class="visible-xs">{{ latest_thread.modified|date:'d/m H:i' }}</span>
                        <strong>{{ latest_thread.latest_post.author }}</strong>
                        </a>
                        </small>
                    {% endif %}
                </td>
            </tr>
            {% endwith %}
            {% endfor %}
        </tbody>
    </table>
</div>
{# Caption #}
<div class="row">
    <div class="col-xs-12">
        <h6>Légende</h6>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <p class="legend"><img src="{% static 'img/on.png' %}" style="vertical-align:middle;padding:0 5px 3px 0;"><small>De nouveaux messages depuis votre dernière visite</small></p>
        <p class="legend"><img src="{% static 'img/off.png' %}" style="vertical-align:middle;padding:0 5px 3px 0;"><small>Aucun nouveau message depuis votre dernière visite</small></p>
    </div>
</div>
{% endblock %}