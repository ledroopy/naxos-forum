{% extends "logged_in.html" %}
{% load static %}
{% block logged_in_content %}
{# Path #}
<div class="row">
    <h6><a href="{% url 'forum:top' %}">FoRuM</a> &gt; {{ category.title }}</h6>
</div>
<br>
{# Buttons #}
<div class="row">
    <a href="{% url 'forum:new_thread' category.slug %}">
        <button class="btn btn-primary btn-sm">Nouveau sujet</button></a>
    <a href="{% url 'forum:new_poll' category.slug %}">
        <button class="btn btn-default btn-sm">Nouveau sondage</button></a>
</div>
<br>
{# Threads #}
<table class="table table-condensed table-hover">
    <thead>
    <tr>
        <th style="width: 60%"><small>Message</small></th>
        <th class="text-center"><small>Auteur</small></th>
        <th class="text-center"><small>Rép.</small></th>
        <th class="text-center"><small>Vues</small></th>
        <th class="text-center"><small>Dernier message</small></th>
    </tr>
    </thead>
    <tbody>
        {% for thread in object_list %}
        <tr>
            <td class="vert-align">
                <img src="{% get_static_prefix %}img/icon1.gif">
                {% if thread.isSticky and thread.question %}
                    Annonce/Sondage : 
                {% elif thread.isSticky %}
                    Annonce :
                {% elif thread.question %}
                    Sondage :
                {% endif %}
                <a href="{% url 'forum:thread' category.slug thread.slug %}" style="word-wrap: break-word">{{ thread.title }}</a>
            </td>
            <td class="text-center vert-align">
                <small><strong>{{ thread.author }}</strong></small>
            </td>
            <td class="text-center vert-align"><small>{{ thread.posts.count }}</small></td>
            <td class="text-center vert-align"><small>{{ thread.viewCount }}</small></td>
            <td class="text-center vert-align">
                <small>
                <a href="{% url 'forum:thread' category.slug thread.slug %}#{{ thread.posts.latest.pk }}">
                {{ thread.modified|date:'d/m/y H:i' }}
                <br><strong>{{ thread.posts.latest.author }}</strong>
                </a>
                </small>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{# Pagination #}
<div class="col-md-12 text-center">
{% if is_paginated %}
<div class="pagination">
    <span class="page-links">
        {% if page_obj.has_previous %}
            <a href="?page=1">&lt;&lt; </a>
            <a href="?page={{ page_obj.previous_page_number }}">Précédente</a>
        {% endif %}
        <span class="page-current">
            Page {{ page_obj.number }} sur {{ page_obj.paginator.num_pages }}
        </span>
        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">Suivante</a>
            <a href="?page=last">&gt;&gt;</a>
        {% endif %}
    </span>
</div>
{% endif %}
</div>
{% endblock %}